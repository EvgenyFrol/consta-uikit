import { SelectExampleItems } from './examples/SelectExampleItems/SelectExampleItems';
import { SelectExamplePlaceholder } from './examples/SelectExamplePlaceholder/SelectExamplePlaceholder';
import { SelectExampleSize } from './examples/SelectExampleSize/SelectExampleSize';
import { SelectExampleForm } from './examples/SelectExampleForm/SelectExampleForm';
import { SelectExampleView } from './examples/SelectExampleView/SelectExampleView';
import { SelectExampleRenderItem } from './examples/SelectExampleRenderItem/SelectExampleRenderItem';

# Select

Выпадающий список. Позволяет выбрать один из нескольких вариантов.

Используйте Select, если вариантов много — пять или больше. Если вариантов меньше,
используйте [Radio](?path=/docs/components-radio--playground)
или [ChoiceGroup](?path=/docs/components-choicegroup--playground).

- [Варианты](#варианты)
- [Размер](#размер)
- [Форма](#форма)
- [Внешний вид](#внешний-вид)
- [Список свойств](#свойства)
- [Пример использования](#примеры)

## Варианты

Варианты для выпадающего списка передаются в своство `items`.
Название элементов должно быть с заглавной буквы.

По умолчанию тип своства `items` равен [DefaultItem](#defaultitem)

## Значение

Значение задается в свойстве `value`

По умолчанию тип своства `value` равен [DefaultItem](#defaultitem)

## CallBack onChange

Чтобы взаимодействовать с выбором занчения используйте свойство `onChange`,
он сработает при выборе элемента или при очистке поля ввода,
и вернет его значение которое задавали в `items`.
Так же вернет событие выбора, ввод заначения возможен как по клику мыши так
и по клавеше `Enter` на клавиатуре. Ознакомиться с типом можно [тут](#proponchange)

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function SelectExampleItems() {
  const [value, setValue] = useState<Item | null>();
  return <Select items={items} value={value} onChange={({ value }) => setValue(value)} />;
}
```

<SelectExampleItems />

## Подсказка

Подсказка, которая видна, когда ни один вариант не выбран, задается в свойстве `placeholder`.
Сформулируйте подсказку так, чтобы стало понятно, что по клику на поле раскроется список вариантов,
один из которых нужно выбрать.

Если не знаете, что написать в подсказке, используйте универсальное **Выберите**.

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function SelectExamplePlaceholder() {
  const [value, setValue] = useState<Item | null>();
  return (
    <div className={cnDocsDecorator('Section')}>
      <Select
        placeholder="Выберите значение"
        items={items}
        value={value}
        onChange={({ value }) => setValue(value)}
      />
    </div>
  );
}
```

<SelectExamplePlaceholder />

## Размер

За размер компонента отвечает свойство `size`. Варианты: `xs`, `s` , `m` , `l` , по умолчанию `m`.

Компонент занимает всю ширину родительского блока.

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function SelectExampleSize() {
  const [value, setValue] = useState<Item | null>();
  return (
    <>
      <Select
        placeholder="Выберите значение"
        size="xs"
        items={items}
        value={value}
        onChange={({ value }) => setValue(value)}
      />
    </>
  );
}
```

<SelectExampleSize />

## Формма

За форму селекта отвечает свойство `form`.Варианты:
`default`, `brick`, `round`, `clearRound`, `roundClear`, `clearDefault`, `defaultClear`, `defaultBrick`, `brickDefault`, `brickClear`, `clearBrick`, `clearClear`
по умолчанию `default`.

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function SelectExampleForm() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Select
      placeholder="Выберите значение"
      form="round"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<SelectExampleForm />

## Внешний вид

За вид компонента отвечает свойство `view`. Варианты: `default , clear`, по умолчанию `default`.

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function SelectExampleView() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Select
      placeholder="Выберите значение"
      view="clear"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<SelectExampleView />

## Свое представление элемента списка

Для того чтобы сделать свое представление элементов списка воспользуйтесь свойством `renderItem`.
Свойство принимает [функцию рендера](https://reactjs.org/docs/render-props.html).
Ознакомиться с типом можно [тут](#proprenderitem)

**Важно**: корневой DOM элемент, должен иметь свойство `role="option"`

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const cnSelectExampleRenderItem = cn('SelectExampleRenderItem');

export function SelectExampleRenderItem() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Select
      placeholder="Выберите значение"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      renderItem={({ item, active, hovered, onClick, onMouseEnter }) => (
        <div
          className={cnSelectExampleRenderItem('Item', { active, hovered })}
          role="option"
          aria-selected={active}
          onMouseEnter={onMouseEnter}
          onClick={onClick}
        >
          {item.label}
        </div>
      )}
    />
  );
}
```

<SelectExampleRenderItem />

## Cвойства

#### DefaultItem

```tsx
type DefaultItem = {
  label: string;
  id: string | number;
  groupId?: string | number;
  disabled?: boolean;
};
```

#### PropOnChange

```tsx
type PropOnChange<ITEM = DefaultItem> = (props: {
  value: ITEM | null;
  e: React.SyntheticEvent;
}) => void;
```

#### PropRenderItem

```tsx
type PropRenderItem<ITEM = DefaultItem> = (props: {
  item: ITEM;
  active: boolean;
  hovered: boolean;
  onClick: React.ReactEventHandler;
  onMouseEnter: React.ReactEventHandler;
}) => React.ReactElement | null;
```

| Свойство                      | Тип или варианты значения                              | По умолчанию   | Описание                                                                                         |
| ----------------------------- | ------------------------------------------------------ | -------------- | ------------------------------------------------------------------------------------------------ |
| [`view?`](#внешний-вид)       | `default , clear`                                      | `default`      | Внешний вид компонента                                                                           |
| [`disabled?`](#внешний-вид)   | `boolean`                                              | -              | Делает компонент недоступным                                                                     |
| [`size?`](#размер)            | `'s' , 'm' , 'l'`                                      | `'m'`          | Размер компонента                                                                                |
| [`form?`](#форма)             | `default`, `brick`, `round`                            | `default`      | Размер компонента                                                                                |
| [`placeholder?`](#варианты)   | `string`                                               | -              | Подсказка, отображается, когда вариант не выбран                                                 |
| [`options`](#варианты)        | `T[]`                                                  | -              | Варианты, которые можно выбрать                                                                  |
| [`getOptionLabel`](#варианты) | `(arg: T) => string`                                   | -              | Функция для получения текста варианта, который будет отображаться в поле для выбранного значения |
| [`getOptionKey?`](#варианты)  | `(arg: T) => string | number`                          | getOptionLabel | Функция для получения уникального ключа элемента списка                                          |
| `value?`                      | `T , null`                                             | `null`         | Значение селекта                                                                                 |
| `ariaLabel?`                  | `string`                                               | -              | `aria` атрибут для метки                                                                         |
| `id`                          | `string`                                               | -              | Идентификатор селекта в DOM                                                                      |
| `onChange?`                   | `(value: string | null) => void`                       | -              | Обработчик события изменения значения компонента                                                 |
| `onBlur?`                     | `(event?: React.FocusEvent<HTMLInputElement>) => void` | -              | Обработчик события `blur`                                                                        |
| `onFocus?`                    | `(event?: React.FocusEvent<HTMLInputElement>) => void` | -              | Обработчик события `focus`                                                                       |
| `className?`                  | `string`                                               | -              | Дополнительный CSS-класс                                                                         |
| dropdownClassName?            | `string`                                               | -              | Дополнительный CSS-класс для выпадающего блока                                                   |

## Примеры

## Вариант не выбран

```tsx
import React from 'react';
import { Select } from '@consta/uikit/Select';

type Option = {
  label: string;
  value: string;
};

const items = [
  { label: 'Москва', value: 'moscow' },
  { label: 'Санкт-Петербург', value: 'spb' },
  { label: 'Томск', value: 'tomsk' },
];

const Example = () => {
  const getItemLabel = (option: SelectOption): string => option.label;

  return <Select id="city" options={items} getOptionLabel={getItemLabel} />;
};
```

## Вариант выбран

```tsx
import React from 'react';
import { Select } from '@consta/uikit/Select';

type Option = {
  label: string;
  value: string;
};

const items = [
  { label: 'Москва', value: 'moscow' },
  { label: 'Санкт-Петербург', value: 'spb' },
  { label: 'Томск', value: 'tomsk' },
];

const Example = () => {
  const getItemLabel = (option: SelectOption): string => option.label;
  const getItemKey = (option: SelectOption): string => option.value;
  const getItemValue = (option: SelectOption): string => option.value;

  return (
    <Select
      id="city"
      value={{ label: 'Москва', value: 'moscow' }}
      options={items}
      getOptionLabel={getItemLabel}
    />
  );
};
```
